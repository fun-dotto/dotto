# Pull Request

## Pull Request とは

Pull Request（PR）は、GitHub の機能の一つで、自分の Branch の変更を `main` Branch にマージする前に、他の開発者にレビューを依頼するためのものです。PR を作成することで、コードの品質を保ち、チーム全体で変更内容を共有・確認できます。

## Pull Request の原則

Dotto では、以下の原則に従って Pull Request を作成します：

- **1PR1 変更の原則**: 1 つの Pull Request には、1 つの論理的な変更のみを含めます。複数の変更を 1 つの PR にまとめないようにします。
- **小さな PR**: 可能な限り小さな PR を作成します。たった 1 行でも、それが意味のある変更であれば問題ありません。500 行以上の変更がある場合は、PR を分割することを検討してください。
- **レビューを依頼**: PR を作成したら、必ず Reviewer を設定してレビューを依頼します。

## Pull Request の作成手順

1. Branch をリモートにプッシュします：

   ```bash
   git push origin <ブランチ名>
   ```

2. GitHub のリポジトリページで「Compare & pull request」ボタンをクリックするか、直接 Pull Request を作成します。

3. Pull Request のタイトルと説明を記入します（テンプレートに従って記述します）。

4. 必須項目を設定します（後述）。

5. 「Create pull request」をクリックして PR を作成します。

## Pull Request の必須項目

Danger による自動チェックが行われ、以下の項目が必須です：

- **PR タイトル**: 5 文字以上で、変更内容が分かりやすいタイトルを記述します。
- **PR 説明**: 10 文字以上で、変更内容を詳しく記載します（テンプレートに従って記述）。
- **Reviewer**: レビューを依頼する Reviewer を設定します（必須）。
- **Assignee**: 自分自身を Assignee に設定します（必須）。
- **Milestone**: 関連する Milestone を設定します（必須）。

## Pull Request テンプレート

Pull Request を作成すると、以下のテンプレートが自動的に表示されます。各項目を記入してください：

### 概要

変更内容を 1 行程度で簡潔に記述します。

### やったこと

実装した内容を詳細に記述します。完了したもののみチェックを入れます。

- [ ] 実装項目 1
- [ ] 実装項目 2

### 関連する Issue

関連する Issue がある場合は、`Close #Issue番号` の形式で記述します。

- Close #123

### 確認したこと

CI ワークフローで確認できること以外で、手動で確認したことを記述します。完了したもののみチェックを入れます。

- [ ] 動作確認項目 1
- [ ] 動作確認項目 2

### UI 差分

UI に変更がある場合は、Before と After のスクリーンショットを貼り付けます。

|           Before           |           After            |
| :------------------------: | :------------------------: |
| <img src="" width="200" /> | <img src="" width="200" /> |

### コメント

レビュアーへのコメントや、特に注意してほしい点があれば記述します。

### メモ

その他のメモがあれば記述します。

## Pull Request のレビュープロセス

1. **PR 作成**: PR を作成すると、自動的に CI が実行されます。
2. **レビュー依頼**: Reviewer にレビューを依頼します。
3. **レビュー対応**: レビュアーからのコメントに対して、対応や返答を行います。
4. **承認**: レビュアーから承認（Approval）を得ます。
5. **マージ**: 承認後、`main` Branch にマージします。

## Pull Request のベストプラクティス

- **頻繁にコミット**: 作業中は頻繁にコミットし、PR を小さく保ちます。
- **説明を充実させる**: PR の説明は、変更内容が分かりやすいように詳しく記述します。
- **UI 差分を添付**: UI に変更がある場合は、必ず Before/After のスクリーンショットを添付します。
- **テストを追加**: アプリコードを変更した場合は、テストも追加することを検討します。
- **コンフリクトを解消**: `main` Branch とのコンフリクトがある場合は、解消してからマージします。

## GitHub Projects との連携

PR を作成すると、GitHub Projects の Dotto Backlog で、対応する Issue の Status が自動的に「レビュー中」に変更されます。PR がマージされると、「完了」に変更されます。
