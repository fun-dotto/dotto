# Commit

## Commit とは

Commit（Commit）は、Git において変更内容をリポジトリに記録する操作です。Commit を行うことで、コードの変更履歴（差分）が保存され、後から変更内容を確認したり、特定の時点に戻したりすることができます。

## Commit の原則とベストプラクティス

Dotto では、以下の原則とベストプラクティスに従って Commit を行います：

- **最小変更単位で Commit**: 1 つの Commit には、1 つの論理的な変更のみを含めます。複数の変更を 1 つの Commit にまとめないようにします。
- **頻繁に Commit**: 小さな変更でも、意味のある単位で Commit します。
- **関連する変更をまとめる**: 同じ目的の変更は 1 つの Commit にまとめます。
- **無関係な変更を分ける**: 異なる目的の変更は別々の Commit に分けます。
- **Commit 前に確認**: `git diff` で変更内容を確認してから Commit します。
- **意味のある Commit メッセージ**: Commit メッセージは、変更内容が分かりやすいように記述します。

## Commit メッセージの形式

Commit メッセージは、日本語で記述します。以下のような形式を使用します：

### 基本的な形式

- **追加**: `Add 機能名` または `機能名を追加`
  - 例: `Add docs about Branch`, `時刻表示オプションを追加`
- **更新**: `Update 対象` または `対象を更新`
  - 例: `Update CLAUDE.md`, `READMEを更新`
- **修正**: `Fix 問題` または `問題を修正`
  - 例: `Fix map search issue`, `検索できない問題を修正`
- **リファクタリング**: `Refactor 対象` または `対象をリファクタリング`
  - 例: `Refactor Timetable`, `Timetableをリファクタリング`

### Issue 番号を含める場合

関連する Issue がある場合は、Commit メッセージに Issue 番号を含めます：

```
機能名: 説明 (#Issue番号)
```

例:

- `Timetable: 時刻表示オプションを追加 (#332)`
- `Map: 検索できない問題を修正 (#323)`

## Commit の手順

1. 変更内容を確認します：

   ```bash
   git status
   ```

2. 変更をステージングエリアに追加します：

   ```bash
   git add <ファイル名>
   ```

   または、すべての変更を追加する場合：

   ```bash
   git add .
   ```

3. Commit を作成します：

   **1 行の Commit メッセージの場合**：

   ```bash
   git commit -m "Commit メッセージ"
   ```

   **複数行の Commit メッセージの場合**：

   エディタを開いて複数行のメッセージを記述する方法：

   ```bash
   git commit
   ```

   このコマンドを実行すると、デフォルトのエディタ（通常は Vim や Nano）が開きます。以下の形式で記述します：

   ```
   タイトル（1行目）

   本文（2行目以降、空行で区切る）
   変更の詳細説明
   - 変更点1
   - 変更点2
   ```

   または、`-m` オプションを複数回使用する方法：

   ```bash
   git commit -m "タイトル" -m "本文の1行目" -m "本文の2行目"
   ```

   エディタを閉じる方法：

   - **Vim の場合**: `Esc` キーを押してから `:wq` と入力して `Enter`
   - **Nano の場合**: `Ctrl + X` を押して、`Y` で保存して `Enter`

## Commit の修正

Commit メッセージを修正する場合（直前の Commit のみ）：

```bash
git commit --amend -m "新しいCommitメッセージ"
```

変更を追加して直前の Commit に含める場合：

```bash
git add <追加するファイル>
git commit --amend --no-edit
```

**注意**: 既にリモートにプッシュした Commit は、原則として修正しないでください。修正が必要な場合は、新しい Commit で対応します。
